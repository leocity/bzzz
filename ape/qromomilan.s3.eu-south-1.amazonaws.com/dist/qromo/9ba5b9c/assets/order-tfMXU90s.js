import{z as Y,u as k,B as b,_ as y,C as B,D as $,q as J,r as _,o as l,c,a as s,e as v,t as u,b as m,w as N,n as I,m as L,p as H,g as F,j as T,k as E,F as x,d as A,l as V,v as j,A as P,i as C,s as X,x as ee,y as te}from"./index-BX7k1nCh.js";import{g as R,a as U,i as re,b as ie,f as se}from"./dates-H6YY-qjF.js";import{b as ae,c as W}from"./AppList-_nPCbBx3.js";import{A as M}from"./AppButton-CMSLQd3U.js";import{A as O}from"./AppDropdown-sP_yurWJ.js";import{A as oe}from"./AppBottomSheet-DvCqGTG4.js";import{A as ne}from"./AppGlyphsExplosion-CLXr4m2D.js";import{A as G}from"./AppPopup-CMC3esdB.js";import{S as de,V as le}from"./vue-3-sanitize-DiTbiRv2.js";import{A as ce}from"./AppTextInput-fA1Z5gyL.js";import{A as ue}from"./AppNotification-C8rYUsl6.js";import{A as me}from"./AppQrImage-Ddv6PfvF.js";import{a as _e}from"./ui-RdZeQpUI.js";import"./AppSwitch-DvNn9XTn.js";import"./AppSelect-25W7QIFw.js";import"./AppInPlaceCloud-Dg08S17k.js";import"./WindowWidth-Bwh3ZodE.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b782cedf-40b5-4ce3-84aa-04a6c737e188",e._sentryDebugIdIdentifier="sentry-dbid-b782cedf-40b5-4ce3-84aa-04a6c737e188")}catch{}})();const ge={redeem_purchase:"Riscuoti il tuo acquisto",table_x:"Tavolo [0]",home_delivery:"Consegna a domicilio",today_time:"Oggi alle [0]",other_day_time:"Il [0] alle [1]",order_number:"Ordine [0]",thanks_order:"Grazie per il tuo ordine!",order_completed:"Il tuo ordine è stato completato con successo.",order_refused:"Il tuo ordine è stato annullato.",go_to_counter:"Vai al bancone",product_redeemed:"Prodotto ritirato?",fiscal_receipt:"Scontrino fiscale",subchoices:"sottoscelte",yes:"Sì",no:"No",back_to_menu:"Torna al menù",back_to_site:"Torna al sito",redeem:"Riscuoti",selected_one:"[0] selezionato",selected:"[0] selezionati",confirm_redeem:"Sei sicuro di voler riscuotere questi prodotti adesso?<br><br>Avrai 5 minuti per mostrare la schermata di conferma al personale.",order_redeemed:"Ordine riscosso",generic_error:"Si è verificato un errore.",feedback_submit_error:"Non è stato possibile inviare il tuo feedback. Riprova più tardi.",feedback_old_error:"Non è stato possibile ricevere il tuo feedback. Ordine troppo vecchio.",redeem_error:"Si è verificato un errore durante la riscossione dei prodotti.",redeem_all:"Riscuoti tutto",completable_order_explain:"Seleziona i prodotti da riscuotere",completable_ticket_explain:"Vai al bancone e ritira i prodotti",show_qr_to_redeem:"Mostra questo QR al personale per riscuotere il tuo ordine.",come_back_from_email:"Puoi sempre tornare a questo ordine dall'email che ti abbiamo inviato.",download_qr:"Scarica QR code",tracking_number:"Tracking n. [0]",summary_title:"Ordine [0] - [1] - Qromo",tracking:"Tracking",digital_tickets:"Biglietti digitali",download:"Download",loading:"Caricamento",loading_tickets_message:"Stiamo generando i tuoi biglietti, appariranno qui appena saranno pronti.",expired_locked_seats:"Prenotazione scaduta",expired_locked_seats_message:"L'emissione di alcuni biglietti dell'ordine non è andata a buon fine: la prenotazione è scaduta.",contact_support:"Contatta l'assistenza",ticket_support_email_subject:"Prenotazione biglietti scaduta",ticket_support_email_body:`

Avrei bisogno di aiuto riguardo all'emissione di alcuni biglietti.

Attività: [0]
Ordine: #[1]

`,pdf_error_title:"Download del PDF non riuscito",pdf_error_message:"Riprova. Se il problema persiste, prova con un browser o un dispositivo diverso.",tracking_status_info_received:"Informazioni ricevute",tracking_status_info_in_transit:"In transito",tracking_status_info_out_for_delivery:"In consegna",tracking_status_info_missed_delivery:"Consegna mancata",tracking_status_info_exception:"Eccezione",tracking_status_info_delivered:"Consegnato",tracking_status_info_unknown:"Sconosciuto",forecast_delivery_courier:"Riceverai aggiornamenti sul tracking in questa pagina",full_tracking_updates:"Dettagli tracking",queue_empty:"Non ci sono ordini davanti al tuo",queue_single:"1 ordine davanti al tuo",queue_multiple:"[0] ordini davanti al tuo",loading_queue:"Caricamento coda...",order_summary:"Riepilogo ordine",feedback_details:"Vuoi dirci di più sulla tua esperienza?",feedback_submitted_title:"Grazie per il tuo feedback!",feedback_submitted_message:"La tua valutazione ci aiuterà a migliorare il servizio.",ticket_not_ready:"Il biglietto non è ancora pronto, ricarica la pagina tra qualche minuto.",warning_test_mode:"ATTENZIONE!! Ordine di TEST",warning_test_mode_explain:"Questo è un ordine di TEST, non è stato effettuato alcun pagamento.",quality:"Qualità",location:"Location",service:"Servizio",pricing:"Prezzo",details:"Dettagli",split:"Dividi",leave_feedback:"Lascia il tuo feedback"},he={redeem_purchase:"Redeem your purchase",table_x:"Table [0]",home_delivery:"Home delivery",today_time:"Today at [0]",other_day_time:"[0] at [1]",order_number:"Order [0]",thanks_order:"Thanks for your order!",order_completed:"Your order has been successfully completed.",order_refused:"Your order has been canceled.",go_to_counter:"Go to counter",yes:"Yes",no:"No",product_redeemed:"Product redeemed?",fiscal_receipt:"Fiscal receipt",subchoices:"subchoices",back_to_menu:"Back to menu",back_to_site:"Back to website",redeem:"Redeem",selected_one:"[0] selected",selected:"[0] selected",confirm_redeem:"Are you sure you want to redeem these products now?<br><br>You will have 5 minutes to show the confirmation screen to the staff.",order_redeemed:"Order redeemed",generic_error:"An error occurred.",feedback_submit_error:"Unable to submit your feedback. Please try again later.",feedback_old_error:"Unable to receive your feedback. Order too old.",redeem_error:"An error occurred while redeeming the products.",redeem_all:"Redeem all",completable_order_explain:"Select the products to redeem",completable_ticket_explain:"Go to the counter and pick up the product",show_qr_to_redeem:"Show this QR code to the staff to redeem your purchase.",come_back_from_email:"You can always come back to this order from the email we sent you.",download_qr:"Download QR code",tracking_number:"Tracking n. [0]",summary_title:"Order [0] - [1] - Qromo",tracking:"Tracking",digital_tickets:"Digital tickets",download:"Download",loading:"Loading",loading_tickets_message:"We are generating your tickets, they will appear here once ready.",expired_locked_seats:"Reservation expired",expired_locked_seats_message:"The generation of some tickets of the order failed: the reservation has expired.",contact_support:"Contact support",ticket_support_email_subject:"Ticket reservation expired",ticket_support_email_body:`

I need help with the issuance of some tickets.

Business: [0]
Order: #[1]

`,pdf_error_title:"PDF download failed",pdf_error_message:"Please try again. If the problem persists, try with a different browser or device.",tracking_status_info_received:"Information received",tracking_status_info_in_transit:"In transit",tracking_status_info_out_for_delivery:"Out for delivery",tracking_status_info_missed_delivery:"Missed delivery",tracking_status_info_exception:"Exception",tracking_status_info_delivered:"Delivered",tracking_status_info_unknown:"Unknown",forecast_delivery_courier:"You will receive tracking updates in this page",full_tracking_updates:"Tracking details",queue_empty:"There are no orders ahead of yours",queue_single:"1 order ahead of yours",queue_multiple:"[0] orders ahead of yours",loading_queue:"Loading queue...",order_summary:"Order summary",feedback_details:"Want to tell us more about your experience?",feedback_submitted_title:"Thank you for your feedback!",feedback_submitted_message:"Your rating will help us improve our service.",ticket_not_ready:"The ticket is not ready yet, please reload the page in a few minutes.",warning_test_mode:"WARNING!! TEST order",warning_test_mode_explain:"This is a TEST order, no payment was made.",quality:"Quality",location:"Location",service:"Service",pricing:"Pricing",details:"Details",split:"Split",leave_feedback:"Leave your feedback"},pe={it:ge,en:he},fe={redeem_purchase:"Canjea tu compra",table_x:"Tabla [0]",home_delivery:"Entrega a domicilio",today_time:"Hoy en [0]",other_day_time:"[0] en [1]",order_number:"Orden [0]",thanks_order:"¡Gracias por tu orden!",order_completed:"Su orden ha sido completada satisfactoriamente.",order_refused:"Tu pedido ha sido cancelado.",go_to_counter:"ir al mostrador",yes:"Sí",no:"No",product_redeemed:"¿Producto canjeado?",subchoices:"subopciones",back_to_menu:"Volver al menú",back_to_site:"Volver al sitio web",redeem:"Canjear",selected_one:"[0] seleccionado",selected:"[0] seleccionado",confirm_redeem:"¿Estás seguro de que deseas canjear estos productos ahora?<br><br> Tendrás 5 minutos para mostrar la pantalla de confirmación al personal.",order_redeemed:"Orden canjeada",generic_error:"Ocurrió un error.",feedback_submit_error:"No se pueden enviar sus comentarios. Por favor, inténtelo de nuevo más tarde.",feedback_old_error:"No se pueden recibir sus comentarios. Orden demasiado antigua.",redeem_error:"Se produjo un error al canjear los productos.",redeem_all:"Canjear todo",completable_order_explain:"Selecciona los productos a canjear",completable_ticket_explain:"Acércate al mostrador y recoge el producto.",show_qr_to_redeem:"Muestra este código QR al personal para canjear tu compra.",come_back_from_email:"Siempre podrás volver a este pedido desde el correo electrónico que te enviamos.",download_qr:"Descargar código QR",tracking_number:"seguimiento n. [0]",summary_title:"Orden [0] - [1] - Qromo",tracking:"Seguimiento",digital_tickets:"Entradas digitales",download:"Descargar",loading:"Cargando",loading_tickets_message:"Estamos generando tus tickets, aparecerán aquí una vez listos.",expired_locked_seats:"Reserva caducada",expired_locked_seats_message:"Falló la generación de algunos tickets del pedido: la reserva ha caducado.",contact_support:"Soporte de contacto",ticket_support_email_subject:"Reserva de billetes caducada",ticket_support_email_body:`

Necesito ayuda con la emisión de unos billetes. Negocio: [0] Pedido: #[1]

`,pdf_error_title:"Falló la descarga del PDF",pdf_error_message:"Inténtalo de nuevo. Si el problema persiste, intente con un navegador o dispositivo diferente.",tracking_status_info_received:"Información recibida",tracking_status_info_in_transit:"En tránsito",tracking_status_info_out_for_delivery:"Fuera para entrega",tracking_status_info_missed_delivery:"Entrega perdida",tracking_status_info_exception:"Excepción",tracking_status_info_delivered:"Entregado",tracking_status_info_unknown:"Desconocido",forecast_delivery_courier:"Recibirás actualizaciones de seguimiento en esta página.",full_tracking_updates:"Detalles de seguimiento",queue_empty:"No hay pedidos por delante del tuyo",queue_single:"1 pedido por delante del tuyo",queue_multiple:"[0] pedidos por delante del tuyo",loading_queue:"Cargando cola...",order_summary:"Resumen del pedido",feedback_details:"¿Quieres contarnos más sobre tu experiencia?",feedback_submitted_title:"¡Gracias por tus comentarios!",feedback_submitted_message:"Su calificación nos ayudará a mejorar nuestro servicio.",ticket_not_ready:"El ticket aún no está listo, recarga la página en unos minutos.",quality:"Calidad",location:"Ubicación",service:"Servicio",pricing:"Precios",details:"Detalles",split:"Dividir",leave_feedback:"Deja tus comentarios"},Se={redeem_purchase:"Échangez votre achat",table_x:"Tableau [0]",home_delivery:"Livraison à domicile",today_time:"Aujourd'hui à [0]",other_day_time:"[0] à [1]",order_number:"Commande [0]",thanks_order:"Merci pour votre commande!",order_completed:"Votre commande a été complétée avec succès.",order_refused:"Votre commande a été annulée.",go_to_counter:"Aller au comptoir",yes:"Oui",no:"Non",product_redeemed:"Produit racheté ?",subchoices:"sous-choix",back_to_menu:"Retour au menu",back_to_site:"Retour au site",redeem:"Racheter",selected_one:"[0] sélectionné",selected:"[0] sélectionné",confirm_redeem:"Êtes-vous sûr de vouloir utiliser ces produits maintenant ?<br><br> Vous aurez 5 minutes pour montrer l’écran de confirmation au personnel.",order_redeemed:"Commande échangée",generic_error:"Une erreur s'est produite.",feedback_submit_error:"Impossible de soumettre vos commentaires. Veuillez réessayer plus tard.",feedback_old_error:"Impossible de recevoir vos commentaires. Commande trop ancienne.",redeem_error:"Une erreur s'est produite lors de l'échange des produits.",redeem_all:"Échanger tout",completable_order_explain:"Sélectionnez les produits à échanger",completable_ticket_explain:"Allez au comptoir et récupérez le produit",show_qr_to_redeem:"Montrez ce code QR au personnel pour valider votre achat.",come_back_from_email:"Vous pourrez toujours revenir sur cette commande à partir de l'email que nous vous avons envoyé.",download_qr:"Télécharger le code QR",tracking_number:"Suivi n. [0]",summary_title:"Commande [0] - [1] - Qromo",tracking:"Suivi",digital_tickets:"Billets numériques",download:"Télécharger",loading:"Chargement",loading_tickets_message:"Nous générons vos billets, ils apparaîtront ici une fois prêts.",expired_locked_seats:"Réservation expirée",expired_locked_seats_message:"La génération de certains billets de la commande a échoué : la réservation est expirée.",contact_support:"Contactez le support",ticket_support_email_subject:"Réservation de billet expirée",ticket_support_email_body:`

J'ai besoin d'aide pour l'émission de certains billets. Entreprise : [0] Commande : #[1]

`,pdf_error_title:"Le téléchargement du PDF a échoué",pdf_error_message:"Veuillez réessayer. Si le problème persiste, essayez avec un autre navigateur ou appareil.",tracking_status_info_received:"Information reçue",tracking_status_info_in_transit:"En transit",tracking_status_info_out_for_delivery:"En cours de livraison",tracking_status_info_missed_delivery:"Livraison manquée",tracking_status_info_exception:"Exception",tracking_status_info_delivered:"Livré",tracking_status_info_unknown:"Inconnu",forecast_delivery_courier:"Vous recevrez des mises à jour de suivi sur cette page",full_tracking_updates:"Détails de suivi",queue_empty:"Il n'y a pas de commandes avant la vôtre",queue_single:"1 commande en avance sur la vôtre",queue_multiple:"[0] commandes en avance sur la vôtre",loading_queue:"Chargement de la file d'attente...",order_summary:"Récapitulatif de la commande",feedback_details:"Vous souhaitez nous en dire plus sur votre expérience ?",feedback_submitted_title:"Merci pour votre avis!",feedback_submitted_message:"Votre note nous aidera à améliorer notre service.",ticket_not_ready:"Le ticket n'est pas encore prêt, merci de recharger la page dans quelques minutes.",quality:"Qualité",location:"Emplacement",service:"Service",pricing:"Tarifs",details:"Détails",split:"Diviser",leave_feedback:"Laissez vos commentaires"},ke={redeem_purchase:"Lösen Sie Ihren Einkauf ein",table_x:"Tabelle [0]",home_delivery:"Hauslieferung",today_time:"Heute um [0]",other_day_time:"[0] bei [1]",order_number:"Bestellung [0]",thanks_order:"Danke für Ihre Bestellung!",order_completed:"Ihre Bestellung wurde erfolgreich abgeschlossen.",order_refused:"Ihre Bestellung wurde storniert.",go_to_counter:"Gehen Sie zur Theke",yes:"Ja",no:"NEIN",product_redeemed:"Produkt eingelöst?",subchoices:"Unterauswahl",back_to_menu:"Zurück zum Menü",back_to_site:"Zurück zur Website",redeem:"Tilgen",selected_one:"[0] ausgewählt",selected:"[0] ausgewählt",confirm_redeem:"Sind Sie sicher, dass Sie diese Produkte jetzt einlösen möchten?<br><br> Sie haben 5 Minuten Zeit, dem Personal den Bestätigungsbildschirm zu zeigen.",order_redeemed:"Bestellung eingelöst",generic_error:"Ein Fehler ist aufgetreten.",feedback_submit_error:"Ihr Feedback kann nicht übermittelt werden. Bitte versuchen Sie es später noch einmal.",feedback_old_error:"Ihr Feedback kann nicht empfangen werden. Bestellung zu alt.",redeem_error:"Beim Einlösen der Produkte ist ein Fehler aufgetreten.",redeem_all:"Alles einlösen",completable_order_explain:"Wählen Sie die Produkte aus, die Sie einlösen möchten",completable_ticket_explain:"Gehen Sie zur Theke und holen Sie das Produkt ab",show_qr_to_redeem:"Zeigen Sie dem Personal diesen QR-Code, um Ihren Einkauf einzulösen.",come_back_from_email:"Sie können jederzeit über die E-Mail, die wir Ihnen gesendet haben, zu dieser Bestellung zurückkehren.",download_qr:"Laden Sie den QR-Code herunter",tracking_number:"Tracking n. [0]",summary_title:"Bestellen Sie [0] - [1] - Qromo",tracking:"Verfolgung",digital_tickets:"Digitale Tickets",download:"Herunterladen",loading:"Wird geladen",loading_tickets_message:"Wir generieren Ihre Tickets. Sobald sie fertig sind, werden sie hier angezeigt.",expired_locked_seats:"Reservierung abgelaufen",expired_locked_seats_message:"Die Generierung einiger Tickets der Bestellung ist fehlgeschlagen: Die Reservierung ist abgelaufen.",contact_support:"Kontaktieren Sie Support",ticket_support_email_subject:"Die Ticketreservierung ist abgelaufen",ticket_support_email_body:`

Ich brauche Hilfe bei der Ausstellung einiger Tickets. Geschäft: [0] Bestellung: #[1]

`,pdf_error_title:"PDF-Download fehlgeschlagen",pdf_error_message:"Bitte versuche es erneut. Wenn das Problem weiterhin besteht, versuchen Sie es mit einem anderen Browser oder Gerät.",tracking_status_info_received:"Information empfangen",tracking_status_info_in_transit:"Unterwegs",tracking_status_info_out_for_delivery:"raus zur Lieferung",tracking_status_info_missed_delivery:"Lieferung verpasst",tracking_status_info_exception:"Ausnahme",tracking_status_info_delivered:"Geliefert",tracking_status_info_unknown:"Unbekannt",forecast_delivery_courier:"Auf dieser Seite erhalten Sie Tracking-Updates",full_tracking_updates:"Verfolgungsdetails",queue_empty:"Es liegen keine Bestellungen vor Ihnen vor",queue_single:"1 Bestellung vor Ihnen",queue_multiple:"[0] Bestellungen vor Ihnen",loading_queue:"Warteschlange wird geladen...",order_summary:"Bestellübersicht",feedback_details:"Möchten Sie uns mehr über Ihre Erfahrungen erzählen?",feedback_submitted_title:"Danke für Ihre Rückmeldung!",feedback_submitted_message:"Ihre Bewertung hilft uns, unseren Service zu verbessern.",ticket_not_ready:"Das Ticket ist noch nicht fertig, bitte laden Sie die Seite in ein paar Minuten neu.",quality:"Qualität",location:"Standort",service:"Service",pricing:"Preisgestaltung",details:"Einzelheiten",split:"Teilt",leave_feedback:"Hinterlassen Sie Ihr Feedback"},ve={es:fe,fr:Se,de:ke},w=Y("orderSummary",{state:()=>({order,address,business,orderUser,items:orderItems,itemsProducts:orderExtraItems,rate,socials:[],availableSocials:[],messages:[],splitTickets:{},splitIndexes:{},qrShown:null}),getters:{itemProducts:e=>t=>e.itemsProducts.filter(i=>i.order_item_id===t),orderNumber:e=>be(Number(e.order.order_number_day)),menuLinkParams:e=>{let t="";e.order.table_number&&(t="&table="+encodeURIComponent(e.order.table_number));let i="";return e.order.qr_version&&Number(e.order.qr_version)>0&&(i="v="+encodeURIComponent(e.order.qr_version)+"&"),i+(tknTemp?"token="+tknTemp:"")+t+(tknTemp?"&tmp=qr":"")},orderTitle:e=>{let t=k();if(e.order.order_mode==="qr")return e.order.name?e.order.name:Number(e.order.qr_version)<2?t.getString("table_x",[e.order.table_number]):e.order.table_number;if(e.order.order_mode==="delivery")if(e.address)if(e.address.via&&e.address.civico){let i=e.address.details?" - "+e.address.details:"";return e.address.via+" "+e.address.civico+i}else return e.address.address;else return t.getString("home_delivery");else if(e.order.order_mode==="takeaway"){let i=e.orderUser&&e.orderUser.name?e.orderUser.name+" - ":"",r=R(e.order.takeaway_date),o=r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=r.toLocaleDateString([],{day:"numeric",month:"numeric"});return r.getFullYear()===new Date().getFullYear()&&r.getMonth()===new Date().getMonth()&&r.getDate()===new Date().getDate()?i+t.getString("today_time",[o]):i+t.getString("other_day_time",[a,o])}else return t.getString("order_number",[e.orderNumber])},businessSocials:e=>{let t=[];for(let i in e.socials){let r=e.socials[i],o=e.availableSocials.find(a=>a.type===e.socials[i].type);o&&t.push({url:o.url,type:o.type,value:r.value})}return t},completableOrder:e=>Number(e.business.customer_completable_order)>0,isTicketMode:e=>Number(e.business.customer_completable_order)===2,isOrderItemRedeemed:e=>t=>Number(t.redeemed)===Number(t.quantity)||["completed","canceled","failed"].includes(e.order.status),hasItemsToRedeem:e=>Number(e.business.customer_completable_order)>0&&e.items.some(t=>Number(t.redeemed)<Number(t.quantity)),businessLanguage:e=>languages.find(t=>t.language_id===e.business.menu_language_id),preparedMessages:e=>{let t=k(),i=[];return e.order.status==="completed"&&i.push({message:"completed",creation_date:null}),e.order.delivery_date&&e.order.courier_rate_id?i.push({message:t.getString("forecast_delivery_courier"),creation_date:null}):e.order.delivery_date&&!e.order.courier_rate_id?i.push({message:t.getString("forecast_delivery",[Q(e.order.delivery_date)]),creation_date:null}):e.order.order_preparation_time&&i.push({message:t.getString("forecast_preparation",[Q(e.order.order_preparation_time)]),creation_date:null}),i},allMessages:e=>{let t=e.preparedMessages,i=e.messages,r=[];for(let o in t)r.push(t[o]);for(let o in i)r.push(i[o]);return r},orderHasTracking:e=>e.order.courier_rate_id&&e.rate&&e.rate.tracking_url&&e.rate.tracking_number,orderTrackings:e=>e.orderHasTracking&&e.rate.trackings?e.rate.trackings:null,lastOrderTracking:e=>e.orderTrackings&&e.orderTrackings.length>0?e.orderTrackings[e.orderTrackings.length-1]:null},actions:{trackingStatus(e){let t=k(),i=Number(e);return i===1?t.getString("tracking_status_info_received"):i===2?t.getString("tracking_status_info_in_transit"):i===3?t.getString("tracking_status_info_out_for_delivery"):i===4?t.getString("tracking_status_info_missed_delivery"):i===5?t.getString("tracking_status_info_exception"):i===6?t.getString("tracking_status_info_delivered"):t.getString("tracking_status_info_unknown")},getOrderFeedback(e){b.init().getOrderFeedback(orderObfuscatedId,t=>{t&&t.result==="OK"?e&&e(t.feedback||{}):e&&e(!1)})},updateOrderFeedback(e,t,i,r,o,a,n){b.init().updateFeedback(orderObfuscatedId,e,t,i,r,o||null,a,d=>{if(d&&d.result==="OK")n&&n(!0,d.feedback_id);else{let g=d&&d.details?d.details:null;n&&n(!1,g)}})},refreshOrderMessages(){let e=this;b.init().getOrderMessages(orderObfuscatedId,function(t){t&&t.messages&&t.messages.length?e.messages=t.messages:e.messages=[],t&&t.rate&&t.trackings&&e.rate&&(e.rate=t.rate,e.rate.trackings=t.trackings)})},refreshOrderRedeemedItems(e){b.init().getRedeemedQuantities(orderObfuscatedId,t=>{if(t&&t.result==="OK"&&t.items&&t.order_completed){let i=Number(t.order_completed)===1;i&&this.order.status!=="completed"&&(this.order.status="completed",this.qrShown=this.qrShown?this.qrShown+1:1),!i&&t.items.length&&t.items.forEach(r=>{let o=this.items.find(a=>Number(a.order_item_id)===Number(r.order_item_id));o.redeemed!==r.redeemed&&(o.redeemed=r.redeemed,this.qrShown=this.qrShown?this.qrShown+1:1),o.quantity!==r.quantity&&(o.quantity=r.quantity,this.qrShown=this.qrShown?this.qrShown+1:1)}),e(!0)}else e(!1)},()=>{e(!1)})},redeemItems(e,t){let i=this;b.init().redeemItems(orderObfuscatedId,business.business_id,JSON.stringify(e),r=>{if(r&&r.result&&r.result==="OK"){for(let o in e){let a=e[o],n=i.items.find(d=>d.order_item_id===a.order_item_id);n&&(n.redeemed=Number(n.redeemed)+Number(a.redeemed),a.splitId>=0&&(this.splitIndexes[a.order_item_id]?this.splitIndexes[a.order_item_id].push(a.splitId):this.splitIndexes[a.order_item_id]=[a.splitId]))}t(!0)}else t(!1)},()=>{t(!1)})},refreshBusinessSocials(){let e=this;b.init().getBusinessSocials(business.business_id,function(t){t&&t.social_collection&&t.social_collection.length&&t.available_socials&&(e.socials=t.social_collection,e.availableSocials=t.available_socials)})},getOrderTime(){return ye(order.date,!0)},translateItems(){let e=k();if(e.lang||e.setLang(),e.lang===this.businessLanguage.language_code)return;let t=[],i=[];for(let a in this.items)t.push(this.items[a].menu_item_id);for(let a in this.itemsProducts)i.push(this.itemsProducts[a].menu_item_list_product_id);let r=this,o=this.business.receipt_custom_instructions?this.business.receipt_custom_instructions:"";b.init().translateMenu(business.businessId,this.businessLanguage.language_code,e.lang,t,[],[],"",o,i,[],a=>{if(a&&a.result==="OK")for(let n in a.translations){for(let d in r.items)if(r.items[d].name===a.translations[n].string_one){r.items[d].name=a.translations[n].string_two;break}for(let d in r.items_products)if(r.items[d].product_name===a.translations[n].string_one){r.items[d].product_name=a.translations[n].string_two;break}this.business.receipt_custom_instructions&&this.business.receipt_custom_instructions===a.translations[n].string_one&&(this.business.receipt_custom_instructions=a.translations[n].string_two)}})},init(){b.init(TEST&&LOCAL?"http://"+urlToUse:"https://"+urlToUse,URL_HTML+"/console/login/"),this.translateItems(),refreshToken&&b.init().loginUserRefreshToken(refreshToken,function(e){"access_token"in e&&(sessionStorage.setItem("oauth_token",e.access_token),b.init().oauthToken=e.access_token)}),tknCover&&localStorage.setItem("coverInfo",JSON.stringify({tkn:tknCover,order_date:this.order.date,order_id:this.order.order_id}))}}});function be(e){var t="#"+e;return e<10?t="#00"+e:e<100&&(t="#0"+e),t}function ye(e,t=!1){let i=k(),r=U(e);if(r>=-3&&r<=0)r=i.getString("caps_now");else if(r>0&&r<120){let o=t?"x_min_ago":"x_min";r=i.getString(o,[r])}else if(r>0&&r<60*24*3){let o=t?"x_hours_ago":"x_hours";r=i.getString(o,[Math.floor(r/60)])}else if(r>0){let o=t?"x_days_ago":"x_days";r=i.getString(o,[Math.floor(r/(60*24))])}else console.log("getTimeString: timeString is negative -> "+r),r="";return r}function Q(e){let t=k();var i=-U(e);if(i){if(i<2)i=t.getString("soon");else if(i<60)i=t.getString("in_x_min",[Math.floor(i)]);else if(i<120){let r=i%60;i=t.getString("in_1_hour_x_min",[Math.floor(r)])}else if(i<180)i=t.getString("in_x_hours_y_min",["2",Math.floor(i%60)]);else if(i<300)i=t.getString("in_x_hour",[Math.floor(i/60)]);else if(re(e)){let r=R(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});i=t.getString("today_at",[r])}else if(ie(e)){let r=R(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});i=t.getString("tomorrow_at",[r])}else i=t.getString("in_x_days",[Math.floor(i/(60*24))]);return i}else return t.getString("soon")}const we={setup(){const e=B(),t=w(),i=k(),r=$();return{getIcon:e.get,getString:i.getString,orderSummaryStore:t,scriptStore:r}},emits:["redeeming","redeemed","split-ticket"],name:"ItemTicketRedeemer",components:{AppPopup:G,AppButton:M,AppLoader:J,AppGlyphsExplosion:ne},data(){return{state:"item",goStaffTimer:null,forceHtmlRefresh:0,htmlRefreshInterval:null,qrCode:null,showingQr:!1}},props:{item:{type:Object,required:!0,validator(e){return e.title&&e.quantity&&e.order_item_id}}},computed:{gradientStyle(){let e="2CECBE";this.orderSummaryStore.business.receipt_ticket_color1&&(e=this.orderSummaryStore.business.receipt_ticket_color1);let t="FDDE00";this.orderSummaryStore.business.receipt_ticket_color2&&(t=this.orderSummaryStore.business.receipt_ticket_color2);let i="FC2291";return this.orderSummaryStore.business.receipt_ticket_color3&&(i=this.orderSummaryStore.business.receipt_ticket_color3),"--gradient-color1: #"+e+"; --gradient-color2: #"+t+"; --gradient-color3: #"+i+";"}},methods:{handleTicketClick(){if(this.orderSummaryStore.isOrderItemRedeemed(this.item))return;let e=this;this.state==="item"?this.orderSummaryStore.isTicketMode?(this.state="go-staff",this.pageTransition("page-item","page-go-staff"),this.goStaffTimer&&clearTimeout(this.goStaffTimer),this.goStaffTimer=setTimeout(function(){e.state="item",e.pageTransition("page-go-staff","page-item")},5400)):(this.state="qr",this.showingQr=!0,this.orderSummaryStore.qrShown=this.orderSummaryStore.qrShown?this.orderSummaryStore.qrShown+1:1,this.pageTransition("page-item","page-qr"),this.scriptStore.loadScript("qrs",()=>{this.$nextTick(()=>{let t=this.$refs["qr-container"];t&&(this.qrCode=new QRCode(t,{text:URL_HTML+"/e/?o="+this.orderSummaryStore.order.order_id+"&i="+this.item.order_item_id+"&q="+this.item.quantity,width:98,height:98,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})),this.showingQr=!1})})):this.state==="go-staff"?(this.state="confirm",this.goStaffTimer&&clearTimeout(this.goStaffTimer),this.pageTransition("page-go-staff","page-confirm")):this.state==="qr"&&this.hideQr()},hideQr(){this.state="item",this.pageTransition("page-qr","page-item"),this.orderSummaryStore.qrShown=null,setTimeout(()=>{this.qrCode&&this.qrCode.clear()},110)},cancelRedeem(){this.state="item",this.pageTransition("page-confirm","page-item")},confirmRedeem(){this.state="loading",this.pageTransition("page-confirm","page-loading"),this.$emit("redeeming");let e=[{order_item_id:this.item.order_item_id,redeemed:this.item.quantity,splitId:this.item.splitId}];setTimeout(()=>{this.orderSummaryStore.redeemItems(e,t=>{TEST&&this.$refs["popup-test-mode"].toggleStatus(!0),this.pageTransition("page-loading","page-item"),this.state="item",this.$emit("redeemed",t)})},500)},splitTicket(){this.state==="qr"&&this.hideQr(),this.$emit("split-ticket",this.item),this.$nextTick(()=>{this.setItemTitles()})},pageTransition(e,t){let i=this;this.$refs[e].classList.add("leave"),setTimeout(()=>{i.$refs&&i.$refs[e]&&i.$refs[t]&&(i.$refs[e].classList.remove("visible"),i.$refs[t].classList.add("enter")),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.$refs&&i.$refs[e]&&i.$refs[t]&&(i.$refs[t].classList.add("visible"),i.$refs[e].classList.remove("leave")),setTimeout(()=>{i.$refs&&i.$refs[t]&&i.$refs[t].classList.remove("enter")},110)})})},110)},setItemTitles(){let e=this.$refs["item-ticket-title"],t=this.$refs["item-ticket-title-inner"];e&&(e.innerHTML=this.item.quantity+"x "+this.item.title),t&&(t.innerHTML=this.item.quantity+"x "+this.item.title)}},mounted(){this.htmlRefreshInterval=setInterval(this.setItemTitles,100),this.setItemTitles()},beforeUnmount(){clearInterval(this.htmlRefreshInterval)},watch:{"orderSummaryStore.qrShown":function(e){e&&!this.showingQr&&this.state==="qr"&&this.hideQr()}}},q=e=>(H("data-v-7233989c"),e=e(),F(),e),Te={class:"ticket-container"},Ie={class:"ticket-side ticket-left"},xe=q(()=>s("div",{class:"ticket-piece piece-left-top"},null,-1)),qe=["innerHTML"],Re=q(()=>s("div",{class:"ticket-piece piece-left-bottom"},null,-1)),Ae={class:"ticket-content"},Me={class:"ticket-page page-item visible",ref:"page-item"},Oe={key:0,class:"image-container"},De=["src"],Le={ref:"item-ticket-title"},Ce={class:"ticket-page page-go-staff",ref:"page-go-staff"},Pe={class:"go-staff-p"},ze={class:"product-p",ref:"item-ticket-title-inner"},Ne={class:"ticket-page page-confirm",ref:"page-confirm"},Ee={class:"button-container"},Qe={class:"ticket-page page-loading",ref:"page-loading"},Be={class:"ticket-page page-qr",ref:"page-qr"},$e={class:"qr-container",ref:"qr-container"},He={class:"x-container"},Fe={preserveAspectRatio:"none",viewBox:"0 0 200 100",xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"1.5",width:"100%",height:"100%"}},Ve=q(()=>s("path",{d:"M1.556,1.559L198.414,98.388",style:{fill:"none",stroke:"rgb(252,34,145)","stroke-width":"3px"}},null,-1)),je=q(()=>s("g",{transform:"matrix(-1,0,0,1,199.97,0)"},[s("path",{d:"M1.556,1.559L198.414,98.388",style:{fill:"none",stroke:"rgb(252,34,145)","stroke-width":"3px"}})],-1)),Ue=[Ve,je],We={class:"ticket-side ticket-right"},Ge=q(()=>s("div",{class:"ticket-piece piece-right-top"},null,-1)),Ke=["innerHTML"],Ze=q(()=>s("div",{class:"ticket-piece piece-right-bottom"},null,-1)),Ye={key:0,class:"subticket"};function Je(e,t,i,r,o,a){const n=_("AppButton"),d=_("AppLoader"),g=_("AppPopup");return l(),c("div",Te,[s("div",{class:I(["ticket",{redeemed:r.orderSummaryStore.isOrderItemRedeemed(i.item)}]),style:L(a.gradientStyle)},[s("div",Ie,[xe,s("div",{class:"ticket-svg-container",innerHTML:r.getIcon("iconTicketPiece")},null,8,qe),Re]),s("div",Ae,[s("div",{class:"ticket-content-radius",onClick:t[0]||(t[0]=(...p)=>a.handleTicketClick&&a.handleTicketClick(...p))},[s("div",Me,[r.orderSummaryStore.business.receipt_ticket_image?(l(),c("div",Oe,[s("img",{src:r.orderSummaryStore.business.receipt_ticket_image,alt:""},null,8,De)])):v("",!0),s("p",Le,null,512)],512),s("div",Ce,[s("p",Pe,u(r.getString("go_to_counter")),1),s("p",ze,null,512)],512),s("div",Ne,[s("p",null,u(r.getString("product_redeemed")),1),s("div",Ee,[m(n,{class:"button-negative",text:r.getString("no"),onClick:N(a.cancelRedeem,["stop"])},null,8,["text","onClick"]),m(n,{outline:"",class:"button-positive",text:r.getString("yes"),onClick:N(a.confirmRedeem,["stop"])},null,8,["text","onClick"])])],512),s("div",Qe,[m(d)],512),s("div",Be,[s("div",$e,null,512)],512),s("div",He,[(l(),c("svg",Fe,Ue))])])]),s("div",We,[Ge,s("div",{class:"ticket-svg-container",innerHTML:r.getIcon("iconTicketPiece")},null,8,Ke),Ze])],6),i.item.quantity>1&&!i.item.split&&i.item.quantity!==i.item.redeemed?(l(),c("div",Ye,[m(n,{text:r.getString("split"),onClick:a.splitTicket},null,8,["text","onClick"])])):v("",!0),m(g,{title:r.getString("warning_test_mode"),"body-text":r.getString("warning_test_mode_explain"),ref:"popup-test-mode"},null,8,["title","body-text"])])}const Xe=y(we,[["render",Je],["__scopeId","data-v-7233989c"]]),et={setup(){const e=k(),t=w(),i=$();return{getString:e.getString,orderSummaryStore:t,scriptStore:i}},name:"ItemsSummary",components:{AppBottomSheet:oe,AppNumberInput:ae,AppDropdown:O,AppList:W,AppButton:M,ItemTicketRedeemer:Xe,AppPopup:G},data(){return{selectedItems:[],confirmedItems:[],bottomSheetWidth:"720px",resizeListener:null,redeemerPage:0,noOverlay:!0,refreshRedeemedInterval:!0,confirmationPage:!1}},computed:{instructions(){return this.orderSummaryStore.business.receipt_custom_instructions?this.$sanitize(this.orderSummaryStore.business.receipt_custom_instructions.replace(/\n/g,"<br>"),{allowedTags:["br"]}):this.getString("completable_ticket_explain")},orderSummary(){let e=this,t=["completed","canceled","failed"].includes(this.orderSummaryStore.order.status),i=[];return this.orderSummaryStore.items.forEach(r=>{let o=null,a=e.orderSummaryStore.itemProducts(r.order_item_id);a&&a.length>0&&(o=[],a.forEach(h=>{h.menu_item_id===r.menu_item_id&&o.push({title:h.product_name+(Number(h.nested)?" (+ "+e.getString("subchoices")+")":""),quantity:h.quantity})}));let n=Number(r.quantity),d=Number(r.redeemed),g={id:r.order_item_id,title:r.name,quantity:n,redeemed:t?n:d,split:!1,splitId:-1,image:r.picture,customSlot:this.orderSummaryStore.completableOrder?"ticketModeItem":"simpleItem",composites:o,order_item_id:r.order_item_id},p=n!==d&&d>0&&!t,S=this.orderSummaryStore.splitTickets[r.order_item_id];if(this.orderSummaryStore.completableOrder&&p){let h=[];for(let f=0;f<d;f++)h.push(f);this.orderSummaryStore.splitIndexes[r.order_item_id]=h,this.orderSummaryStore.splitTickets[r.order_item_id]=!0}if(this.orderSummaryStore.completableOrder&&(S||p))for(let h=0;h<n;h++){let f=0;this.orderSummaryStore.splitIndexes&&this.orderSummaryStore.splitIndexes[r.order_item_id]?this.orderSummaryStore.splitIndexes[r.order_item_id].indexOf(h)!==-1&&(f=1):f=h<d?1:0,i.push({...g,split:!0,splitId:h,quantity:1,redeemed:f,id:r.order_item_id+"-"+h})}else i.push(g)}),i},backToMenu(){return TEST&&LOCAL?"http://"+urlToUse+"/?"+this.orderSummaryStore.menuLinkParams:"https://"+urlToUse+"/?"+this.orderSummaryStore.menuLinkParams}},methods:{redeemedTicket(e){e||this.$refs["redeem-error-ticket"].toggleStatus(!0)},splitTicket(e){this.orderSummaryStore.splitTickets[e.order_item_id]=!0,this.orderSummary.forEach(t=>{let i=this.$refs[t.id];i&&i.setItemTitles()})},startRedeemCheck(e){this.orderSummaryStore.refreshOrderRedeemedItems(()=>{let t=["completed","canceled","failed"].includes(this.orderSummaryStore.order.status),i=this.orderSummaryStore.items.find(r=>!this.orderSummaryStore.isOrderItemRedeemed(r));clearTimeout(this.refreshRedeemedInterval),t||!i?this.refreshRedeemedInterval=null:this.refreshRedeemedInterval=setTimeout(()=>{this.startRedeemCheck(e)},e)})}},mounted(){this.orderSummaryStore.completableOrder&&(this.resizeListener=()=>{window.innerWidth<550?this.bottomSheetWidth="100%":window.innerWidth<768?this.bottomSheetWidth="550px":this.bottomSheetWidth="720px"},window.addEventListener("resize",this.resizeListener),this.resizeListener(),["completed","canceled","failed"].includes(this.orderSummaryStore.order.status)||(this.startRedeemCheck(this.orderSummaryStore.isTicketMode?26e3:9e3),this.orderSummaryStore.isTicketMode||this.scriptStore.loadScript("qrs",()=>{})))},beforeUnmount(){this.resizeListener&&window.removeEventListener("resize",this.resizeListener),clearInterval(this.messagesInterval)}},tt={key:0,class:"order-summary-title"},rt=["innerHTML"],it={class:"list-item-title"},st={class:"item-title"},at={class:"item-quantity"},ot={key:0,class:"composite-container"},nt={class:"item-quantity"},dt={class:"list-item-image"},lt=["src","alt"];function ct(e,t,i,r,o,a){const n=_("ItemTicketRedeemer"),d=_("AppList"),g=_("AppButton"),p=_("AppPopup");return l(),c(x,null,[r.orderSummaryStore.completableOrder?v("",!0):(l(),c("p",tt,u(r.getString("order_summary")),1)),r.orderSummaryStore.business.receipt_custom_instructions||r.orderSummaryStore.completableOrder?(l(),c("p",{key:1,class:"order-summary-explain order-summary-explain-ticket mt-10",innerHTML:a.instructions},null,8,rt)):v("",!0),m(d,{items:a.orderSummary,class:I(["order-summary",{noDivider:r.orderSummaryStore.completableOrder}])},{simpleItem:T(({item:S})=>[s("div",{class:"list-item-header",ref:"item-"+S.order_item_id},[s("div",it,[s("p",st,[s("span",at,"x"+u(S.quantity),1),E(" "+u(S.title),1)]),S.composites?(l(),c("div",ot,[(l(!0),c(x,null,A(S.composites,h=>(l(),c("p",{class:"item-composite-title",key:h.menu_item_list_product_id},[s("span",nt,"x"+u(h.quantity),1),E(" "+u(h.title),1)]))),128))])):v("",!0)]),s("div",dt,[V(s("img",{src:S.image?S.image:"#",alt:S.title},null,8,lt),[[j,S.image]])])],512)]),ticketModeItem:T(({item:S})=>[m(n,{ref:S.id,item:S,onRedeemed:a.redeemedTicket,onSplitTicket:a.splitTicket},null,8,["item","onRedeemed","onSplitTicket"])]),_:1},8,["items","class"]),m(g,{outline:"",inverted:"",class:"order-button mt-20 mb-20",text:r.getString("back_to_menu"),href:a.backToMenu},null,8,["text","href"]),m(p,{ref:"redeem-error-ticket",title:r.getString("generic_error"),"body-text":r.getString("redeem_error")},null,8,["title","body-text"])],64)}const ut=y(et,[["render",ct],["__scopeId","data-v-f5ebe830"]]),mt={setup(){return{getString:k().getString}},name:"OrderQR",components:{AppButton:M},data(){return{orderQr:null}},created(){orderQr&&(this.orderQr=orderQr)}},_t={class:"qr-container"},gt={class:"mt-10 color-white"},ht={class:"qrcode mt-20"},pt=["src"],ft=["href"],St={class:"mt-20 mb-10 qr-warning"};function kt(e,t,i,r,o,a){const n=_("AppButton");return l(),c("div",_t,[s("p",gt,u(r.getString("show_qr_to_redeem")),1),s("div",ht,[s("img",{src:o.orderQr,alt:"QR Code"},null,8,pt)]),s("a",{href:o.orderQr,download:"test.png"},[m(n,{outline:"",inverted:"",class:"mt-20",text:r.getString("download_qr")},null,8,["text"])],8,ft),s("p",St,u(r.getString("come_back_from_email")),1)])}const vt=y(mt,[["render",kt],["__scopeId","data-v-22574cee"]]),bt={setup(){const e=k(),t=w();return{getString:e.getString,orderSummaryStore:t}},name:"OrderMessages",data(){return{messagesInterval:null}},computed:{},methods:{getMessage(e){return e==="completed"?this.getString("order_completed"):e==="refuse"?this.getString("order_refused"):e},getMessageTime(e){if(e){let t=R(e),i=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return i+":"+r}else return""}},created(){this.orderSummaryStore.refreshOrderMessages()},mounted(){let e=25e3,t=this.orderSummaryStore.lastOrderTracking,i=t&&t.status?Number(t.status)<=3:!0;this.orderSummaryStore.order.courier_rate_id&&i&&(e=1e4),this.messagesInterval=setInterval(()=>{this.orderSummaryStore.refreshOrderMessages()},e)},beforeUnmount(){clearInterval(this.messagesInterval)}},yt={key:0,class:"order-messages order-white-content"},wt={class:"messages"},Tt={class:"message"},It={key:0,class:"time"};function xt(e,t,i,r,o,a){return r.orderSummaryStore.allMessages.length>0?(l(),c("div",yt,[s("div",wt,[(l(!0),c(x,null,A(r.orderSummaryStore.allMessages,(n,d)=>(l(),c("div",{class:"message-container",key:d},[s("div",Tt,u(a.getMessage(n.message)),1),n.creation_date?(l(),c("div",It,u(a.getMessageTime(n.creation_date)),1)):v("",!0)]))),128))])])):v("",!0)}const qt=y(bt,[["render",xt],["__scopeId","data-v-9ff12a65"]]),Rt={setup(){const e=k(),t=w();return{getString:e.getString,orderSummaryStore:t}},name:"OrderFeedbacks",components:{AppNotification:ue,AppTextInput:ce,StarsRating:de,AppButton:M,AppList:W,AppDropdown:O},data(){return{feedbackId:null,loading:!1,collapsedFeedbacksDropdown:!0,qualityRating:0,locationRating:0,serviceRating:0,pricingRating:0,feedbackDetails:"",currentFeedbackError:this.getString("feedback_submit_error")}},computed:{averageRating(){return(this.qualityRating+this.locationRating+this.serviceRating+this.pricingRating)/4},ratingsItems(){return[{title:this.getString("quality"),rating:this.qualityRating,changeRating:e=>{this.qualityRating=e,this.setRatingsIfEmpty(e),this.saveRatings()},customSlot:"stars-slot"},{title:this.orderSummaryStore&&this.orderSummaryStore.order&&this.orderSummaryStore.order.order_mode==="delivery"?this.getString("home_delivery"):this.getString("location"),rating:this.locationRating,changeRating:e=>{this.locationRating=e,this.setRatingsIfEmpty(e),this.saveRatings()},customSlot:"stars-slot"},{title:this.getString("service"),rating:this.serviceRating,changeRating:e=>{this.serviceRating=e,this.setRatingsIfEmpty(e),this.saveRatings()},customSlot:"stars-slot"},{title:this.getString("pricing"),rating:this.pricingRating,changeRating:e=>{this.pricingRating=e,this.setRatingsIfEmpty(e),this.saveRatings()},customSlot:"stars-slot"},{title:this.getString("feedback_details"),callback:e=>{this.feedbackDetails=e},customSlot:"textarea-slot"},{title:this.getString("save"),callback:()=>{this.saveRatings(e=>{e?(this.collapsedFeedbacksDropdown=!0,this.$refs["feedback-success"].openNotification()):this.$refs["feedback-error"].openNotification()})},customSlot:"submit-slot"}]}},methods:{changeGlobalRating(e){this.qualityRating=e,this.locationRating=e,this.serviceRating=e,this.pricingRating=e,this.saveRatings(t=>{t||this.$refs["feedback-error"].openNotification()})},saveRatings(e=null){this.loading||(this.loading=!0,this.orderSummaryStore.updateOrderFeedback(this.qualityRating,this.locationRating,this.serviceRating,this.pricingRating,this.feedbackDetails,this.feedbackId,(t,i)=>{if(this.loading=!1,t)e&&e(!0),!this.feedbackId&&i&&(this.feedbackId=Number(i));else{let r=i==="too_old_order"?"feedback_old_error":"feedback_submit_error";this.currentFeedbackError=this.getString(r),e&&e(!1)}}))},clickHeader(e){e.target&&e.target.classList&&e.target.classList.contains("star")&&!this.collapsedFeedbacksDropdown||(this.collapsedFeedbacksDropdown=!this.collapsedFeedbacksDropdown)},setRatingsIfEmpty(e){this.qualityRating||(this.qualityRating=e),this.locationRating||(this.locationRating=e),this.serviceRating||(this.serviceRating=e),this.pricingRating||(this.pricingRating=e)}},created(){this.loading=!0,this.orderSummaryStore.getOrderFeedback(e=>{e&&(this.feedbackId=Number(e.feedback_id||0),this.qualityRating=Number(e.quality_rating||0),this.locationRating=Number(e.location_rating||0),this.serviceRating=Number(e.service_rating||0),this.pricingRating=Number(e.pricing_rating||0),this.feedbackDetails=e.details||""),this.loading=!1})}},At={class:"order-feedbacks"},Mt={class:"title"},Ot={class:"cta-container"},Dt={class:"card-body-container feedbacks-container"},Lt={class:"row ratings-list-item"},Ct={class:"title"},Pt={class:"cta-container"},zt={class:"row textarea-list-item"},Nt={class:"title"},Et={class:"cta-container"},Qt={class:"row centered p-8"};function Bt(e,t,i,r,o,a){const n=_("StarsRating"),d=_("AppTextInput"),g=_("AppButton"),p=_("AppList"),S=_("AppDropdown"),h=_("AppNotification");return l(),c("div",At,[s("div",{onClick:t[0]||(t[0]=(...f)=>a.clickHeader&&a.clickHeader(...f)),class:I([{rounded:o.collapsedFeedbacksDropdown},"row card-header-container feedbacks-container"])},[s("div",Mt,[s("h2",null,u(r.getString("leave_feedback")),1)]),s("div",Ot,[m(n,{onSelectedRating:a.changeGlobalRating,rating:a.averageRating},null,8,["onSelectedRating","rating"])])],2),s("div",Dt,[m(S,{collapsed:o.collapsedFeedbacksDropdown},{default:T(()=>[m(p,{items:a.ratingsItems},{"stars-slot":T(({item:f})=>[s("div",Lt,[s("div",Ct,[s("p",null,u(f.title),1)]),s("div",Pt,[m(n,{"icons-only":"",onSelectedRating:f.changeRating,rating:f.rating},null,8,["onSelectedRating","rating"])])])]),"textarea-slot":T(({item:f})=>[s("div",zt,[s("div",Nt,[s("p",null,u(f.title),1)]),s("div",Et,[m(d,{placeholder:r.getString("details"),value:o.feedbackDetails,textarea:"","auto-grow":"",onChangingText:f.callback},null,8,["placeholder","value","onChangingText"])])])]),"submit-slot":T(({item:f})=>[s("div",Qt,[m(g,{paused:o.loading,text:f.title,onClick:f.callback},null,8,["paused","text","onClick"])])]),_:1},8,["items"])]),_:1},8,["collapsed"])]),m(h,{type:1,ref:"feedback-success",title:r.getString("feedback_submitted_title"),"body-text":r.getString("feedback_submitted_message")},null,8,["title","body-text"]),m(h,{type:-2,ref:"feedback-error",title:r.getString("generic_error"),"body-text":o.currentFeedbackError},null,8,["title","body-text"])])}const $t=y(Rt,[["render",Bt],["__scopeId","data-v-819f0b31"]]);function Ht(e,t="#ffffff"){switch(e){case"facebook":return'<svg style="width:28px;height:28px" id="icon-facebook" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path_f"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path_f)"><path d="M24,0H9A9.01,9.01,0,0,0,0,9V24a9.01,9.01,0,0,0,9,9h5.487V21.619H11.515v-4.13h2.972V13.783c0-4.208,4.285-5.018,5.366-5.018h3.436v3.9h-3.05a1.141,1.141,0,0,0-1.274,1.2v3.59H23.4l-.617,4.208h-3.9V33H24a9.01,9.01,0,0,0,9-9V9a9.01,9.01,0,0,0-9-9" fill="'+t+'"/></g></svg>';case"instagram":return'<svg style="width:28px;height:28px" id="icon-instagram" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path_i"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path_i)"><path d="M17.345,11.173a5.28,5.28,0,0,0-1.561,0,5.32,5.32,0,1,0,1.561,0" fill="'+t+'"/><path d="M24,0H9A9.011,9.011,0,0,0,0,9V24a9.01,9.01,0,0,0,9,9H24a9.01,9.01,0,0,0,9-9V9a9.01,9.01,0,0,0-9-9m-.383,21.667a8.718,8.718,0,0,1-5.765,3.454,8.875,8.875,0,0,1-1.307.1,8.782,8.782,0,1,1,8.706-10.071h0a8.725,8.725,0,0,1-1.634,6.519m3.3-13.341a1.446,1.446,0,0,1-.229.18,1.285,1.285,0,0,1-.25.14,1.552,1.552,0,0,1-.281.09c-.1.01-.2.02-.3.02a1.551,1.551,0,0,1-1.06-.43,1.522,1.522,0,0,1-.44-1.07,1.5,1.5,0,0,1,.03-.29,1.522,1.522,0,0,1,.091-.28,1.251,1.251,0,0,1,.139-.26,1.35,1.35,0,0,1,.18-.23,1.65,1.65,0,0,1,.77-.41,1.465,1.465,0,0,1,.59,0,1.552,1.552,0,0,1,.281.09,1.285,1.285,0,0,1,.25.14,1.446,1.446,0,0,1,.229.18,1.509,1.509,0,0,1,0,2.13" fill="'+t+'"/></g></svg>';case"linkedin":return'<svg style="width:28px;height:28px" id="icon-linkedin" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path_l"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path_l)"><path d="M24,0H9A9.01,9.01,0,0,0,0,9V24a9.01,9.01,0,0,0,9,9H24a9.01,9.01,0,0,0,9-9V9a9.01,9.01,0,0,0-9-9M12.029,24.656H8.279V11.534h3.75Zm-1.875-15a1.875,1.875,0,1,1,1.875-1.875,1.874,1.874,0,0,1-1.875,1.875m15,15h-3.75v-7.5a1.875,1.875,0,1,0-3.75,0v7.5h-3.75V11.534h3.75v2.328c.773-1.062,1.956-2.328,3.281-2.328a4.472,4.472,0,0,1,4.219,4.688Z" fill="'+t+'"/></g></svg>';case"youtube":return'<svg style="width:28px;height:28px" id="icon-youtube" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path_y"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path_y)"><path d="M15.077,19.7l4.635-2.735a.439.439,0,0,0,0-.754l-4.635-2.741a.437.437,0,0,0-.66.376V19.32a.438.438,0,0,0,.66.377" fill="'+t+'"/><path d="M24,0H9A9.009,9.009,0,0,0,0,9V24a9.009,9.009,0,0,0,9,9H24a9.009,9.009,0,0,0,9-9V9a9.009,9.009,0,0,0-9-9m2.554,21.824A2.557,2.557,0,0,1,24.692,23.5a65.984,65.984,0,0,1-8.01.4,64.455,64.455,0,0,1-7.917-.4A2.563,2.563,0,0,1,6.9,21.825a30.327,30.327,0,0,1-.465-5.377A28.917,28.917,0,0,1,6.9,11.175,2.559,2.559,0,0,1,8.765,9.5a63.247,63.247,0,0,1,7.918-.4,65.81,65.81,0,0,1,8.009.4,2.562,2.562,0,0,1,1.863,1.672h0A28.9,28.9,0,0,1,27,16.448a30.23,30.23,0,0,1-.446,5.377" fill="'+t+'"/></g></svg>';case"twitter":return'<svg style="width:28px;height:28px" id="icon-twitter" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path_t"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path_t)"><path d="M24,0H9A9.01,9.01,0,0,0,0,9V24a9.01,9.01,0,0,0,9,9H24a9.01,9.01,0,0,0,9-9V9a9.01,9.01,0,0,0-9-9m1.527,10.9a7.539,7.539,0,0,1-1.849,1.917c.007.159.01.319.01.48A10.532,10.532,0,0,1,7.474,22.17a7.668,7.668,0,0,0,.884.052,7.436,7.436,0,0,0,4.6-1.586A3.706,3.706,0,0,1,9.5,18.061,3.7,3.7,0,0,0,11.17,18,3.707,3.707,0,0,1,8.2,14.366v-.047a3.7,3.7,0,0,0,1.678.464A3.71,3.71,0,0,1,8.729,9.837a10.521,10.521,0,0,0,7.636,3.874,3.708,3.708,0,0,1,6.312-3.379,7.385,7.385,0,0,0,2.351-.9A3.707,3.707,0,0,1,23.4,11.481a7.394,7.394,0,0,0,2.129-.585Z" fill="'+t+'"/></g></svg>';case"justEat":return'<svg style="width:28px;height:28px" xmlns="http://www.w3.org/2000/svg" width="29.893" height="30" viewBox="0 0 29.893 30"><defs><clipPath id="clip-path-just"><rect width="29.893" height="30" fill="none"/></clipPath></defs><g data-name="Group 426" clip-path="url(#clip-path-just)"><path data-name="Path 1026" d="M3.162,16.292a.555.555,0,0,1,.5.541C3.7,18.7,3.87,25.4,4.383,28.8c.135.9.3,1.2,1,1.2s3.4-.1,3.7-.1.525-.05.475-.425-.325-2.753-.375-5.18c0,0-1.877-.7-1.827-3.5s.25-8.683.25-8.859.1-.7.475-.7.551.225.525.751-.235,5.977-.225,6.306c.025.851.525.926.626.926a.826.826,0,0,0,.926-.851c0-.876.2-6.256.225-6.456s.15-.676.475-.676.6.175.526.7-.25,6.531-.25,6.531.05.8.726.776.826-.525.851-.951.225-6.356.25-6.531.15-.576.5-.526.425.25.425.551-.175,9.009-.175,9.559a3.348,3.348,0,0,1-1.677,2.878s.175,3.939.32,5.259a.417.417,0,0,0,.415.372h6.272a44.868,44.868,0,0,0,.35-5.055s-1.927-.225-2.127-.275-.6-.225-.6-1.251a23.351,23.351,0,0,1,.851-6.957,24.131,24.131,0,0,1,2.878-5.806c.5-.551,1.4-.551,1.552.35s.8,8.008-.35,19.044c0,0,3,.1,3.253.1s.676-.2.751-.926a73.048,73.048,0,0,0,.7-12.182.694.694,0,0,1,.651-.695c.781-.048,2.022-.127,2.324-.161.45-.05,1.226-.475.6-1.5S26.029,9.43,25.9,9.13a4.426,4.426,0,0,1-.325-1.351,38.827,38.827,0,0,0-.75-5.7,1.219,1.219,0,0,0-1.085-.882L21.29,1.006a.742.742,0,0,0-.8.733l-.012,1.391a.28.28,0,0,1-.459.214,42.7,42.7,0,0,0-4.171-3.1,1.675,1.675,0,0,0-1.774.014C11.585,1.847,4.184,7.019.1,14.808a.87.87,0,0,0,.693,1.268Z" transform="translate(0 0)" fill="'+t+'"/></g></svg>';case"deliveroo":return'<svg style="width:28px;height:28px" xmlns="http://www.w3.org/2000/svg" width="30" height="24.677" viewBox="0 0 30 24.677"><defs><clipPath id="clip-path-deliveroo"><rect width="30" height="24.677" fill="none"/></clipPath></defs><g clip-path="url(#clip-path-deliveroo)"><path d="M21.294.029,20.739,5.6,19.436,0H10.647l1.608,7.458L0,10.01l2.246,10.2,21.433,4.464L28.614,13.5,30,.029ZM14.57,12.866a1.483,1.483,0,1,1,1.483-1.483,1.483,1.483,0,0,1-1.483,1.483m6.1.819A1.483,1.483,0,1,1,22.151,12.2a1.483,1.483,0,0,1-1.483,1.483" transform="translate(0 -0.001)" fill="'+t+'"/></g></svg>';case"glovo":return'<svg style="width:28px;height:28px" xmlns="http://www.w3.org/2000/svg" width="18.706" height="30" viewBox="0 0 18.706 30"><defs><clipPath id="clip-path-glovo"><rect width="18.706" height="30" fill="none"/></clipPath></defs><g clip-path="url(#clip-path-glovo)"><path d="M9.3,22.991l-.105,0-.156,0a3.217,3.217,0,0,1-2.5-1.312c-.708-.959-3.5-5.064-5.1-7.426a8.178,8.178,0,0,1-1.4-4.221C0,9.5,0,9.324,0,9.226A10.259,10.259,0,0,1,1.716,3.8a8.384,8.384,0,0,1,2.9-2.678A9.39,9.39,0,0,1,9.225,0a9.429,9.429,0,0,1,4.659,1.148,8.853,8.853,0,0,1,2.962,2.716,10.491,10.491,0,0,1,1.86,5.57c0,.081,0,.183,0,.3a7.808,7.808,0,0,1-1.409,4.378c-1.6,2.287-4.392,6.292-5.2,7.429a3.422,3.422,0,0,1-2.8,1.449M9.225,4.21A4.477,4.477,0,0,0,5.2,6.15a6.1,6.1,0,0,0-1,3.075c0,.012,0,.13.022.609a3.97,3.97,0,0,0,.68,2.05c1.988,2.93,3.5,5.144,4.355,6.368,1.157-1.649,3.27-4.675,4.577-6.548a3.615,3.615,0,0,0,.652-2.027c0-.094,0-.177,0-.243a6.4,6.4,0,0,0-1.108-3.169A4.712,4.712,0,0,0,9.225,4.21" transform="translate(0 -0.001)" fill="'+t+'"/><path d="M98.664,345.743a2.535,2.535,0,1,1-2.535-2.535,2.535,2.535,0,0,1,2.535,2.535" transform="translate(-86.795 -318.278)" fill="'+t+'"/></g></svg>';case"tripAdvisor":return'<svg style="width:28px;height:28px" id="icon-tripAdvisor" xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33"><defs><clipPath id="clip-path-tripAdvisor"><rect width="33" height="33" fill="none"/></clipPath></defs><g clip-path="url(#clip-path-tripAdvisor)"><path d="M21.788,15.612h-.011a1.441,1.441,0,1,0,.011,0" transform="translate(0.409 0.409)" fill="'+t+'"/><path d="M11.855,13.577a3.606,3.606,0,1,0,.961,5.008l0,.012a3.619,3.619,0,0,0,.584-1.669,3.23,3.23,0,0,0,.036-.36,3.606,3.606,0,0,0-1.582-2.99M9.764,18.756a2.232,2.232,0,0,1,.006-4.464h0a2.232,2.232,0,1,1-.008,4.464" transform="translate(0.966 0.967)" fill="'+t+'"/><path d="M19.82,11.965a6.072,6.072,0,0,1,1.742-.293,14.168,14.168,0,0,0-5.321-.948H16.2a14.969,14.969,0,0,0-5.334.924A5.277,5.277,0,0,1,16.241,16.2a5.042,5.042,0,0,1,3.578-4.233" transform="translate(0.229 0.807)" fill="'+t+'"/><path d="M10.316,15.612H10.3a1.441,1.441,0,1,0,.012,0" transform="translate(0.412 0.412)" fill="'+t+'"/><path d="M24,0H9A9.01,9.01,0,0,0,0,9V24a9.01,9.01,0,0,0,9,9H24a9.01,9.01,0,0,0,9-9V9a9.01,9.01,0,0,0-9-9m3.569,15.559A5.727,5.727,0,0,1,19.8,22.754a5.6,5.6,0,0,1-2.1-1.659l-1.231,1.843-1.215-1.826a5.724,5.724,0,0,1-9.079-6.968A7.354,7.354,0,0,0,5.063,11.87H8.648a14.174,14.174,0,0,1,7.828-2.146,13.912,13.912,0,0,1,7.637,2.123h3.824a7.417,7.417,0,0,0-1.12,2.3v0l-.019,0a5.544,5.544,0,0,1,.772,1.415" fill="'+t+'"/><path d="M19.985,13.2a3.579,3.579,0,0,0-2.122,4.6,3.415,3.415,0,0,0,.375.724,3.55,3.55,0,0,0,4.219,1.4v0h.013A3.58,3.58,0,0,0,19.985,13.2m1.221,5.514A2.212,2.212,0,0,1,18.995,16.5h0a2.215,2.215,0,0,1,2.212-2.211h0a2.213,2.213,0,0,1,0,4.425" transform="translate(0.995 0.995)" fill="'+t+'"/></g></svg>';default:return'<svg style="width:28px;height:28px" xmlns="http://www.w3.org/2000/svg" width="30.621" height="30.621" viewBox="0 0 30.621 30.621"><g transform="translate(1.5 2.121)"><path data-name="Path 1176" d="M27,19.5v9a3,3,0,0,1-3,3H7.5a3,3,0,0,1-3-3V12a3,3,0,0,1,3-3h9" transform="translate(-4.5 -4.5)" fill="none" stroke="'+t+'" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/><path data-name="Path 1177" d="M22.5,4.5h9v9" transform="translate(-4.5 -4.5)" fill="none" stroke="'+t+'" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/><path data-name="Path 1178" d="M15,21,31.5,4.5" transform="translate(-4.5 -4.5)" fill="none" stroke="'+t+'" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/></g></svg>'}}const Ft={setup(){const e=k(),t=w();return{getString:e.getString,orderSummaryStore:t}},name:"OrderSocials",methods:{socialToPrint(e,t){return Ht(e,t)}},created(){this.orderSummaryStore.refreshBusinessSocials()}},Vt={key:0,class:"socials order-white-content"},jt=["href","innerHTML"];function Ut(e,t,i,r,o,a){return r.orderSummaryStore.socials.length>0?(l(),c("div",Vt,[(l(!0),c(x,null,A(r.orderSummaryStore.socials,(n,d)=>(l(),c("div",{class:"social",key:d},[s("a",{href:n.url+n.value,target:"_blank",innerHTML:a.socialToPrint(n.type,"#28edbf")},null,8,jt)]))),128))])):v("",!0)}const Wt=y(Ft,[["render",Ut],["__scopeId","data-v-bdf719bd"]]),Gt={components:{AppChevronIcon:P,AppDropdown:O},setup(){const e=k(),t=w();return{getString:e.getString,orderSummaryStore:t}},name:"TrackingPreview",methods:{trackingDate(e){return se(R(e.date_update))}},data(){return{collapsedFullDetails:!0,URL_HTML}}},z=e=>(H("data-v-e84a502a"),e=e(),F(),e),Kt={key:0,class:"tracking-container"},Zt={class:"tracking-preview"},Yt={class:"tracking-subtitle"},Jt={class:"tracking-date"},Xt=z(()=>s("div",{class:"tracking-date-separator"},null,-1)),er={class:"tracking-message"},tr={class:"tracking-city-container"},rr={class:"tracking-city-row start-city"},ir=z(()=>s("div",{class:"tracking-city-row city-steps"},[s("div",{class:"line-left"}),s("div",{class:"line-center"}),s("div",{class:"line-right"})],-1)),sr={class:"tracking-city-row end-city"},ar={key:0,class:"full-updates"},or={class:"full-updates-title"},nr={class:"full-updates-body"},dr={class:"full-updates-body-collapsed"},lr={class:"updates-point"},cr=z(()=>s("div",{class:"central-point"},null,-1)),ur={class:"line-point"},mr={class:"updates-content"},_r={class:"full-updates-date"},gr={class:"full-updates-message"};function hr(e,t,i,r,o,a){const n=_("AppChevronIcon"),d=_("AppDropdown");return r.orderSummaryStore.lastOrderTracking?(l(),c("div",Kt,[s("div",Zt,[s("div",{class:I(["tracking-status",{delivered:Number(r.orderSummaryStore.lastOrderTracking.status)===6,exception:[4,5].includes(Number(r.orderSummaryStore.lastOrderTracking.status))}])},u(r.orderSummaryStore.trackingStatus(r.orderSummaryStore.lastOrderTracking.status)),3),s("div",Yt,[s("div",Jt,u(a.trackingDate(r.orderSummaryStore.lastOrderTracking)),1),Xt,s("div",er,u(r.orderSummaryStore.lastOrderTracking.message),1)]),s("div",tr,[s("div",rr,u(r.orderSummaryStore.orderTrackings&&r.orderSummaryStore.orderTrackings.length>0?r.orderSummaryStore.orderTrackings[0].city:""),1),ir,s("div",sr,u(r.orderSummaryStore.lastOrderTracking.city),1)])]),r.orderSummaryStore.orderTrackings&&r.orderSummaryStore.orderTrackings.length>1?(l(),c("div",ar,[s("div",{class:"full-updates-header",onClick:t[0]||(t[0]=g=>o.collapsedFullDetails=!o.collapsedFullDetails)},[s("div",or,u(r.getString("full_tracking_updates")),1),m(n,{direction:o.collapsedFullDetails?"down":"up"},null,8,["direction"])]),s("div",nr,[m(d,{collapsed:o.collapsedFullDetails},{default:T(()=>[s("div",dr,[(l(!0),c(x,null,A(r.orderSummaryStore.orderTrackings,g=>(l(),c("div",{class:"full-updates-row",key:g.order_tracking_id},[s("div",lr,[cr,V(s("div",ur,null,512),[[j,r.orderSummaryStore.orderTrackings.indexOf(g)!==r.orderSummaryStore.orderTrackings.length-1]])]),s("div",mr,[s("div",{class:I(["full-updates-status",{delivered:Number(g.status)===6,exception:[4,5].includes(Number(g.status))}])},u(r.orderSummaryStore.trackingStatus(g.status)),3),s("div",_r,u(a.trackingDate(g)),1),s("div",gr,u(g.message),1)])]))),128))])]),_:1},8,["collapsed"])])])):v("",!0)])):v("",!0)}const pr=y(Gt,[["render",hr],["__scopeId","data-v-e84a502a"]]),fr={setup(){const e=k(),t=w();return{languageStore:e,orderSummaryStore:t}},name:"QueueDisplay",computed:{queueString(){return this.queueValue===0?this.languageStore.getString("queue_empty"):this.queueValue===1?this.languageStore.getString("queue_single"):this.queueValue>1?this.languageStore.getString("queue_multiple",[this.queueValue]):this.languageStore.getString("loading_queue")},isQueueActive(){return this.orderSummaryStore.order.status!=="completed"&&Number(this.orderSummaryStore.business.queue_active_summary)===1}},data(){return{queueValue:null,intervalTime:null}},methods:{updateQueue(){let e=this;b.init().getOrdersQueue(this.orderSummaryStore.business.business_id,this.orderSummaryStore.order.order_id,function(t){t&&t.result==="OK"&&(e.queueValue=t.orders,e.queueValue===0&&clearInterval(e.intervalTime))})}},mounted(){this.isQueueActive&&(this.intervalTime=setInterval(this.updateQueue,15e3),this.updateQueue())},beforeUnmount(){clearInterval(this.intervalTime)}},Sr={key:0,class:"order-header-animated"},kr={class:"queue-container"};function vr(e,t,i,r,o,a){return a.isQueueActive?(l(),c("div",Sr,[s("div",kr,[s("p",null,u(a.queueString),1)])])):v("",!0)}const br=y(fr,[["render",vr],["__scopeId","data-v-795bf3e5"]]),yr={setup(){const e=k(),t=w();return{getString:e.getString,orderSummaryStore:t}},components:{AppChevronIcon:P,AppDropdown:O,AppQrImage:me},name:"WeconstudioItemsSummary",data(){return{itemSummary:this.getItemSummaryExploded()}},computed:{},methods:{getItemSummaryExploded(){let e=[];for(let t of this.orderSummaryStore.items)for(let i=0;i<t.quantity;i++)e.push({id:t.order_item_id+"_"+i,name:t.name,active:i===0,note:t.note,picture:t.picture});return e},toggleItem(e){this.itemSummary.forEach(t=>{t.id===e.id?t.active=!t.active:t.active=!1})}}},wr={class:"weconstudio-items-summary"},Tr=["onClick"],Ir={class:"item-name"},xr={key:0,class:"item-icon"},qr=["src"],Rr={class:"item-chevron"},Ar={class:"ticket-content"},Mr={key:1};function Or(e,t,i,r,o,a){const n=_("AppChevronIcon"),d=_("AppQrImage"),g=_("AppDropdown");return l(),c("div",wr,[(l(!0),c(x,null,A(o.itemSummary,p=>(l(),c("div",{class:"item-summary",key:p.id},[s("div",{class:"item-container",onClick:S=>a.toggleItem(p)},[s("div",Ir,[p.picture?(l(),c("div",xr,[s("img",{src:p.picture},null,8,qr)])):v("",!0),s("p",null,u(p.name),1)]),s("div",Rr,[m(n,{direction:p.active?"up":"down",color:"#fff"},null,8,["direction"])])],8,Tr),m(g,{collapsed:!p.active},{default:T(()=>[s("div",Ar,[p.note&&p.note.length>5?(l(),C(d,{key:0,"with-download-button":"",value:p.note},null,8,["value"])):(l(),c("p",Mr,u(r.getString("ticket_not_ready")),1))])]),_:2},1032,["collapsed"])]))),128))])}const Dr=y(yr,[["render",Or],["__scopeId","data-v-f61ea4c8"]]),Lr={setup(){const e=k(),t=w(),i=B();return{languageStore:e,orderSummaryStore:t,svgStore:i}},name:"App",components:{WeconstudioItemsSummary:Dr,OrderMessages:qt,AppButton:M,ItemsSummary:ut,AppDropdown:O,AppChevronIcon:P,OrderQR:vt,OrderSocials:Wt,OrderFeedbacks:$t,TrackingPreview:pr,QueueDisplay:br},data(){return{orderQr,intervalTime:null,lowPowerMode:!1,URL_HTML,subdomain,collapsedTicketsDropdown:!0,timeoutCheckTickets:1e3,checkTicketsIterations:0,paramId}},created(){this.languageStore.addStrings(pe,"order",ve),localStorage.getItem("satispay_redirect_params")&&localStorage.removeItem("satispay_redirect_params"),localStorage.removeItem("cart"),this.orderSummaryStore.init(),navigator.userAgent.toLowerCase().indexOf("android")>-1&&(this.lowPowerMode=!0)},computed:{businessColor(){let e=null;return this.orderSummaryStore.business.receipt_background_color?e=_e(this.orderSummaryStore.business.receipt_background_color,"ffffff"):e="0752a3","--background-color: #"+e+";--background-color-light: #"+e+"cc;"},showFeedbacks(){return!this.orderSummaryStore.business.disable_feedbacks||this.orderSummaryStore.business.disable_feedbacks!=="1"},showReceipt(){return typeof paramId>"u"?!1:this.orderSummaryStore.business.apiscontrino_id!==null&&this.orderSummaryStore.order.receipt_id!==null}},mounted(){let e=this;this.intervalTime=setInterval(function(){e.$refs["order-time"].innerHTML=e.orderSummaryStore.getOrderTime()},1e3),document&&document.title&&(document.title=this.languageStore.getString("summary_title",[this.orderSummaryStore.orderNumber,this.orderSummaryStore.business.name]))},beforeUnmount(){clearInterval(this.intervalTime)}},Cr={class:"order-header order-white-content"},Pr={class:"bold"},zr={key:0,class:"main-card order-white-content"},Nr={class:"bold"},Er={class:"card-body-container"},Qr={class:"main-card order-white-content card-glass"},Br={class:"card-header-container"},$r={class:"title"},Hr={class:"card-body-container"},Fr={key:1,class:"main-card order-white-content card-glass"},Vr={class:"card-header-container"},jr={class:"title"},Ur={class:"card-body-container"},Wr={key:2,class:"main-card order-white-content card-glass"},Gr={class:"row space-between show-receipt-row"},Kr={class:"ade-title"},Zr={class:"ade-text"},Yr={key:3,class:"main-card order-white-content card-glass"};function Jr(e,t,i,r,o,a){const n=_("QueueDisplay"),d=_("AppButton"),g=_("TrackingPreview"),p=_("OrderMessages"),S=_("ItemsSummary"),h=_("WeconstudioItemsSummary"),f=_("OrderQR"),K=_("OrderFeedbacks"),Z=_("OrderSocials");return l(),c("main",null,[s("div",{class:"background-after",style:L(a.businessColor)},null,4),s("div",{class:I(["background",{lowPowerMode:o.lowPowerMode}]),style:L("background-image:url(https://qromomilan.s3.eu-south-1.amazonaws.com/img/vue/order-background.png)")},null,6),s("h1",null,u(r.languageStore.getString("thanks_order")),1),s("div",Cr,[s("p",Pr,u(r.orderSummaryStore.orderNumber),1),s("p",{ref:"order-time"},u(r.orderSummaryStore.getOrderTime()),513)]),m(n,{class:"order-header order-white-content"}),r.orderSummaryStore.orderHasTracking?(l(),c("div",zr,[s("div",{class:I(["card-header-container",{rounded:r.orderSummaryStore.orderTrackings&&r.orderSummaryStore.orderTrackings.length===0}])},[s("p",Nr,u(r.languageStore.getString("tracking_number",[r.orderSummaryStore.rate.tracking_number])),1),m(d,{text:r.languageStore.getString("tracking"),href:r.orderSummaryStore.rate.tracking_url},null,8,["text","href"])],2),s("div",Er,[m(g)])])):v("",!0),m(p),s("div",Qr,[s("div",Br,[s("div",$r,[s("h2",null,u(r.orderSummaryStore.orderTitle),1)])]),s("div",Hr,[r.orderSummaryStore.business.integration_id!=="4"?(l(),C(S,{key:0})):(l(),C(h,{key:1}))])]),o.orderQr?(l(),c("div",Fr,[s("div",Vr,[s("div",jr,[s("h2",null,u(r.languageStore.getString("redeem_purchase")),1)])]),s("div",Ur,[m(f)])])):v("",!0),a.showReceipt?(l(),c("div",Wr,[s("div",Gr,[s("div",Kr,[s("div",Zr,[s("p",null,u(r.languageStore.getString("fiscal_receipt")),1)])]),m(d,{"icon-left":"ade-green",text:r.languageStore.getString("download"),href:"/order/receipt/?id="+o.paramId,small:""},null,8,["text","href"])])])):v("",!0),a.showFeedbacks?(l(),c("div",Yr,[m(K)])):v("",!0),m(Z,{class:"mt-10"})])}const Xr=y(Lr,[["render",Jr],["__scopeId","data-v-7e873f0d"]]);window.relativeBase="../";const ei=X(),D=ee(Xr);D.use(ei);D.use(le);D.mixin(te);D.mount("#app");
//# sourceMappingURL=order-tfMXU90s.js.map
